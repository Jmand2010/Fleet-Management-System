<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fleet Management & Maintenance Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2E86AB 0%, #A23B72 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1B4332, #2D6A4F);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .company-info {
            position: absolute;
            top: 20px;
            right: 20px;
            text-align: right;
            font-size: 0.9em;
            opacity: 0.9;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        /* Login Page Styles */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 450px;
            text-align: center;
        }

        .login-header {
            margin-bottom: 30px;
        }

        .login-header h1 {
            color: #1B4332;
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .login-header p {
            color: #666;
            font-size: 16px;
        }

        .auth-tabs {
            display: flex;
            border-radius: 10px;
            background: #f8f9fa;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .auth-tab {
            flex: 1;
            padding: 12px 16px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            color: #666;
        }

        .auth-tab.active {
            background: #2E86AB;
            color: white;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #1B4332;
            font-size: 14px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #2E86AB;
            box-shadow: 0 0 0 3px rgba(46, 134, 171, 0.1);
        }

        .phone-input-container {
            display: flex;
            gap: 10px;
        }

        .country-code {
            flex: 0 0 120px;
        }

        .phone-number {
            flex: 1;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 5px;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2E86AB, #A23B72);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(46, 134, 171, 0.3);
        }

        .btn-google {
            background: #db4437;
            color: white;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-google:hover {
            background: #c23321;
            transform: translateY(-2px);
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
            color: #999;
            font-size: 14px;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #ddd;
        }

        .divider span {
            margin: 0 15px;
        }

        .forgot-password {
            text-align: center;
            margin-top: 20px;
        }

        .forgot-password a {
            color: #2E86AB;
            text-decoration: none;
            font-size: 14px;
        }

        .forgot-password a:hover {
            text-decoration: underline;
        }

        .register-link {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .register-link a {
            color: #2E86AB;
            text-decoration: none;
            font-weight: 600;
        }

        .register-link a:hover {
            text-decoration: underline;
        }

        .company-selector {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e1e8ed;
        }

        .company-selector h3 {
            color: #1B4332;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .company-option {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .company-option input[type="radio"] {
            margin-right: 10px;
            width: auto;
        }

        .new-company-form {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
        }

        .verification-code {
            text-align: center;
            margin: 20px 0;
        }

        .verification-code input {
            width: 60px;
            height: 60px;
            margin: 0 5px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
        }

        .verification-code input:focus {
            border-color: #2E86AB;
        }

        .resend-code {
            color: #2E86AB;
            background: none;
            border: none;
            cursor: pointer;
            text-decoration: underline;
            font-size: 14px;
            margin-top: 10px;
        }

        /* Hide main app initially */
        .main-app {
            display: none;
        }

        .main-app.show {
            display: block;
        }

        /* Rest of the original styles */
        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #ddd;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .nav-tab.active {
            background: white;
            border-bottom-color: #2E86AB;
            color: #2E86AB;
            font-weight: 600;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .app-form-group {
            display: flex;
            flex-direction: column;
        }

        .app-form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #1B4332;
        }

        .app-form-group input,
        .app-form-group select,
        .app-form-group textarea {
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .app-form-group input:focus,
        .app-form-group select:focus,
        .app-form-group textarea:focus {
            outline: none;
            border-color: #2E86AB;
            box-shadow: 0 0 0 3px rgba(46, 134, 171, 0.1);
        }

        .btn-danger {
            background: linear-gradient(135deg, #DC2626, #EF4444);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #059669, #10B981);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #D97706, #F59E0B);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, #0284C7, #0EA5E9);
            color: white;
            font-size: 14px;
            padding: 8px 20px;
        }

        .btn-specs {
            background: linear-gradient(135deg, #7C3AED, #A855F7);
            color: white;
            font-size: 14px;
            padding: 8px 20px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .data-table th,
        .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #f1f3f4;
        }

        .data-table th {
            background: linear-gradient(135deg, #2E86AB, #A23B72);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status.active {
            background: #DCFCE7;
            color: #166534;
        }

        .status.maintenance {
            background: #FEF3C7;
            color: #92400E;
        }

        .status.repair {
            background: #FEE2E2;
            color: #991B1B;
        }

        .status.inactive {
            background: #F3F4F6;
            color: #6B7280;
        }

        .status.dot {
            background: #DBEAFE;
            color: #1E40AF;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #2E86AB, #A23B72);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(46, 134, 171, 0.3);
        }

        .stat-card h3 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .stat-card p {
            font-size: 14px;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .maintenance-due {
            background: linear-gradient(135deg, #DC2626, #EF4444) !important;
        }

        .search-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-filter input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 25px;
            font-size: 14px;
            min-width: 200px;
        }

        .export-btn {
            background: linear-gradient(135deg, #059669, #10B981);
            color: white;
            margin-left: 10px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #aaa;
        }

        .close:hover {
            color: #000;
        }

        .specs-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .specs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .spec-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2E86AB;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .spec-item strong {
            color: #1B4332;
            display: block;
            margin-bottom: 8px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .spec-item span {
            color: #666;
            font-size: 14px;
            font-weight: 500;
        }

        .file-upload-section {
            background: #F0F9FF;
            border: 2px dashed #2E86AB;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .file-upload-section input[type="file"] {
            margin: 10px 0;
        }

        /* Modern Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 20px;
            max-width: 400px;
            z-index: 10000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            border-left: 5px solid #2E86AB;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            border-left-color: #DC2626;
        }

        .notification.warning {
            border-left-color: #D97706;
        }

        .notification.success {
            border-left-color: #059669;
        }

        .notification .notification-title {
            font-weight: 600;
            color: #1B4332;
            margin-bottom: 8px;
        }

        .notification .notification-message {
            color: #666;
            font-size: 14px;
        }

        .notification .notification-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #999;
        }

        .theme-selector {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .theme-button {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid white;
            margin: 5px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .theme-button:hover {
            transform: scale(1.1);
        }

        .theme-blue { background: linear-gradient(135deg, #2E86AB, #A23B72); }
        .theme-green { background: linear-gradient(135deg, #059669, #10B981); }
        .theme-orange { background: linear-gradient(135deg, #EA580C, #F97316); }
        .theme-purple { background: linear-gradient(135deg, #7C3AED, #A855F7); }
        .theme-red { background: linear-gradient(135deg, #DC2626, #EF4444); }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .search-filter {
                flex-direction: column;
            }
            
            .data-table {
                font-size: 12px;
            }
            
            .data-table th,
            .data-table td {
                padding: 8px;
            }

            .notification {
                right: 10px;
                left: 10px;
                max-width: none;
            }

            .phone-input-container {
                flex-direction: column;
            }

            .country-code {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-card">
            <div class="login-header">
                <h1>ðŸš› Fleet Manager</h1>
                <p>Secure Multi-Tenant Fleet Management</p>
            </div>

            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">Login</button>
                <button class="auth-tab" onclick="switchAuthTab('register')">Register</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form active">
                <div class="company-selector">
                    <h3>Select Your Company</h3>
                    <div class="company-option">
                        <input type="radio" id="existingCompany" name="companyType" value="existing" checked onchange="toggleCompanyForm()">
                        <label for="existingCompany">Existing Company</label>
                    </div>
                    <div class="company-option">
                        <input type="radio" id="newCompany" name="companyType" value="new" onchange="toggleCompanyForm()">
                        <label for="newCompany">New Company Registration</label>
                    </div>
                    
                    <select id="companySelect" class="form-group">
                        <option value="">Select Company...</option>
                        <option value="demo-company">Demo Fleet Solutions</option>
                        <option value="abc-transport">ABC Transport Inc.</option>
                        <option value="xyz-logistics">XYZ Logistics</option>
                    </select>
                    
                    <div id="newCompanyForm" class="new-company-form">
                        <div class="form-group">
                            <label>Company Name</label>
                            <input type="text" id="newCompanyName" placeholder="Enter company name">
                        </div>
                        <div class="form-group">
                            <label>Company Code</label>
                            <input type="text" id="newCompanyCode" placeholder="Unique company identifier">
                        </div>
                    </div>
                </div>

                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="switchLoginMethod('email')">Email</button>
                    <button class="auth-tab" onclick="switchLoginMethod('phone')">Phone</button>
                </div>

                <!-- Email Login -->
                <form id="emailLoginForm" class="auth-form active" onsubmit="handleEmailLogin(event)">
                    <button type="button" class="btn btn-primary" onclick="verifyPhoneCode()">Verify Code</button>
                <button type="button" class="resend-code" onclick="resendVerificationCode()">Resend Code</button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-app">
        <!-- Theme Selector -->
        <div id="themeSelector" class="theme-selector">
            <div class="theme-button theme-blue" onclick="changeTheme('blue')" title="Ocean Blue"></div>
            <div class="theme-button theme-green" onclick="changeTheme('green')" title="Forest Green"></div>
            <div class="theme-button theme-orange" onclick="changeTheme('orange')" title="Sunset Orange"></div>
            <div class="theme-button theme-purple" onclick="changeTheme('purple')" title="Royal Purple"></div>
            <div class="theme-button theme-red" onclick="changeTheme('red')" title="Fire Red"></div>
        </div>

        <div class="container">
            <div class="header">
                <div class="company-info">
                    <div id="companyName">Demo Fleet Solutions</div>
                    <div id="userName">John Doe</div>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
                <h1>ðŸš› Fleet Management System</h1>
                <p>Complete equipment tracking and maintenance management</p>
            </div>

            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('dashboard')">Dashboard</button>
                <button class="nav-tab" onclick="showTab('equipment')">Equipment</button>
                <button class="nav-tab" onclick="showTab('maintenance')">Maintenance</button>
                <button class="nav-tab" onclick="showTab('reports')">Reports</button>
            </div>

            <div id="dashboard" class="tab-content active">
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <h3 id="totalEquipment">0</h3>
                        <p>Total Equipment</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="activeEquipment">0</h3>
                        <p>Active Equipment</p>
                    </div>
                    <div class="stat-card maintenance-due">
                        <h3 id="maintenanceDue">0</h3>
                        <p>Maintenance Due</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="totalMaintenanceRecords">0</h3>
                        <p>Maintenance Records</p>
                    </div>
                </div>

                <h2>Recent Maintenance Activities</h2>
                <table class="data-table" id="recentMaintenanceTable">
                    <thead>
                        <tr>
                            <th>Equipment</th>
                            <th>Type</th>
                            <th>Date</th>
                            <th>Cost</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div id="equipment" class="tab-content">
                <h2>Add New Equipment</h2>
                <form id="equipmentForm">
                    <div class="form-grid">
                        <div class="app-form-group">
                            <label>Equipment ID *</label>
                            <input type="text" id="equipmentId" required>
                        </div>
                        <div class="app-form-group">
                            <label>Equipment Name *</label>
                            <input type="text" id="equipmentName" required>
                        </div>
                        <div class="app-form-group">
                            <label>Type *</label>
                            <select id="equipmentType" required>
                                <option value="">Select Type</option>
                                <option value="Dump Trucks">Dump Trucks</option>
                                <option value="Trucks">Trucks</option>
                                <option value="Trailers">Trailers</option>
                                <option value="Paving">Paving</option>
                                <option value="Skids/Excavation">Skids/Excavation</option>
                                <option value="Rollers">Rollers</option>
                                <option value="Sealcoat">Sealcoat</option>
                                <option value="Crack Fill">Crack Fill</option>
                                <option value="Shop Equipment">Shop Equipment</option>
                                <option value="Small Engine">Small Engine</option>
                                <option value="Misc">Misc</option>
                            </select>
                        </div>
                        <div class="app-form-group">
                            <label>Make</label>
                            <input type="text" id="equipmentMake">
                        </div>
                        <div class="app-form-group">
                            <label>Model</label>
                            <input type="text" id="equipmentModel">
                        </div>
                        <div class="app-form-group">
                            <label>Year</label>
                            <input type="number" id="equipmentYear" min="1900" max="2030">
                        </div>
                        <div class="app-form-group">
                            <label>VIN/Serial Number</label>
                            <input type="text" id="equipmentVin">
                        </div>
                        <div class="app-form-group">
                            <label>Status *</label>
                            <select id="equipmentStatus" required>
                                <option value="Active">Active</option>
                                <option value="Maintenance">Maintenance</option>
                                <option value="Repair">Repair</option>
                                <option value="DOT">DOT</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>
                        <div class="app-form-group">
                            <label>License Plate Number</label>
                            <input type="text" id="licensePlate">
                        </div>
                    </div>
                    
                    <h3 style="margin-top: 30px; margin-bottom: 20px; color: #1B4332;">ðŸ”§ Technical Specifications</h3>
                    <div class="form-grid">
                        <div class="app-form-group">
                            <label>Front Axle Tire Size</label>
                            <input type="text" id="frontTireSize" placeholder="e.g., 225/70R19.5">
                        </div>
                        <div class="app-form-group">
                            <label>Drive Axle 1 Tire Size</label>
                            <input type="text" id="driveAxle1TireSize" placeholder="e.g., 245/70R19.5">
                        </div>
                        <div class="app-form-group">
                            <label>Drive Axle 2 Tire Size</label>
                            <input type="text" id="driveAxle2TireSize" placeholder="e.g., 245/70R19.5">
                        </div>
                        <div class="app-form-group">
                            <label>Tag Axle 1 Tire Size</label>
                            <input type="text" id="tagAxle1TireSize" placeholder="e.g., 245/70R19.5">
                        </div>
                        <div class="app-form-group">
                            <label>Tag Axle 2 Tire Size</label>
                            <input type="text" id="tagAxle2TireSize" placeholder="e.g., 245/70R19.5">
                        </div>
                        <div class="app-form-group">
                            <label>Oil Filter Number</label>
                            <input type="text" id="oilFilterNumber" placeholder="e.g., PH8A, FL-1A">
                        </div>
                        <div class="app-form-group">
                            <label>Oil Type</label>
                            <input type="text" id="oilType" placeholder="e.g., 15W-40, 5W-30 Synthetic">
                        </div>
                        <div class="app-form-group">
                            <label>Oil Quantity (Quarts)</label>
                            <input type="number" id="oilQuantity" step="0.5" placeholder="e.g., 15">
                        </div>
                        <div class="app-form-group">
                            <label>Fuel Filter Number</label>
                            <input type="text" id="fuelFilterNumber" placeholder="e.g., FS1280, 33390">
                        </div>
                        <div class="app-form-group">
                            <label>Air Filter Number</label>
                            <input type="text" id="airFilterNumber" placeholder="e.g., CA10467, 46607">
                        </div>
                        <div class="app-form-group">
                            <label>Transmission Filter Number</label>
                            <input type="text" id="transmissionFilterNumber" placeholder="e.g., TF-123, ALLISON-456">
                        </div>
                        <div class="app-form-group">
                            <label>Transmission Fluid Type</label>
                            <input type="text" id="transmissionFluidType" placeholder="e.g., Allison TES 295, Dexron VI">
                        </div>
                        <div class="app-form-group">
                            <label>Transmission Fluid Quantity (Quarts)</label>
                            <input type="number" id="transmissionFluidQuantity" step="0.5" placeholder="e.g., 12">
                        </div>
                        <div class="app-form-group">
                            <label>Hydraulic Filter Number</label>
                            <input type="text" id="hydraulicFilterNumber" placeholder="e.g., HF6177, P164375">
                        </div>
                        <div class="app-form-group">
                            <label>Hydraulic Fluid Type</label>
                            <input type="text" id="hydraulicFluidType" placeholder="e.g., AW-32, ISO 32">
                        </div>
                        <div class="app-form-group">
                            <label>Hydraulic Fluid Quantity (Gallons)</label>
                            <input type="number" id="hydraulicFluidQuantity" step="0.5" placeholder="e.g., 20">
                        </div>
                        <div class="app-form-group">
                            <label>Coolant Type</label>
                            <input type="text" id="coolantType" placeholder="e.g., Extended Life, Green Antifreeze">
                        </div>
                        <div class="app-form-group">
                            <label>Coolant Quantity (Gallons)</label>
                            <input type="number" id="coolantQuantity" step="0.5" placeholder="e.g., 4.5">
                        </div>
                    </div>

                    <div class="file-upload-section">
                        <h4>ðŸ“„ Service Manual Upload</h4>
                        <p>Upload service manual, parts catalog, or technical documentation</p>
                        <input type="file" id="serviceManual" accept=".pdf,.doc,.docx" multiple>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Add Equipment</button>
                </form>

                <div class="search-filter">
                    <input type="text" id="equipmentSearch" placeholder="Search equipment...">
                    <select id="equipmentFilter">
                        <option value="">All Types</option>
                        <option value="Dump Trucks">Dump Trucks</option>
                        <option value="Trucks">Trucks</option>
                        <option value="Trailers">Trailers</option>
                        <option value="Paving">Paving</option>
                        <option value="Skids/Excavation">Skids/Excavation</option>
                        <option value="Rollers">Rollers</option>
                        <option value="Sealcoat">Sealcoat</option>
                        <option value="Crack Fill">Crack Fill</option>
                        <option value="Shop Equipment">Shop Equipment</option>
                        <option value="Small Engine">Small Engine</option>
                        <option value="Misc">Misc</option>
                    </select>
                    <button class="btn export-btn" onclick="exportData('equipment')">Export</button>
                </div>

                <table class="data-table" id="equipmentTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Make/Model</th>
                            <th>Year</th>
                            <th>License Plate</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div id="maintenance" class="tab-content">
                <h2>Add Maintenance Record</h2>
                <form id="maintenanceForm">
                    <div class="form-grid">
                        <div class="app-form-group">
                            <label>Equipment *</label>
                            <select id="maintenanceEquipment" required>
                                <option value="">Select Equipment</option>
                            </select>
                        </div>
                        <div class="app-form-group">
                            <label>Maintenance Type *</label>
                            <select id="maintenanceType" required>
                                <option value="">Select Type</option>
                                <option value="Oil Change">Oil Change</option>
                                <option value="Tire Replacement">Tire Replacement</option>
                                <option value="Brake Service">Brake Service</option>
                                <option value="Engine Repair">Engine Repair</option>
                                <option value="Transmission Service">Transmission Service</option>
                                <option value="Hydraulic Service">Hydraulic Service</option>
                                <option value="DOT Inspection">DOT Inspection</option>
                                <option value="Annual Inspection">Annual Inspection</option>
                                <option value="Paving Equipment Service">Paving Equipment Service</option>
                                <option value="Sealcoat Equipment Service">Sealcoat Equipment Service</option>
                                <option value="Preventive Maintenance">Preventive Maintenance</option>
                                <option value="Emergency Repair">Emergency Repair</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="app-form-group">
                            <label>Date Performed *</label>
                            <input type="date" id="maintenanceDate" required>
                        </div>
                        <div class="app-form-group">
                            <label>Cost ($)</label>
                            <input type="number" id="maintenanceCost" step="0.01" min="0">
                        </div>
                        <div class="app-form-group">
                            <label>Technician/Shop</label>
                            <input type="text" id="maintenanceTechnician">
                        </div>
                        <div class="app-form-group">
                            <label>Mileage/Hours</label>
                            <input type="number" id="maintenanceMileage" min="0">
                        </div>
                        <div class="app-form-group">
                            <label>Hours to Repair</label>
                            <input type="number" id="repairHours" step="0.5" min="0" placeholder="e.g., 4.5">
                        </div>
                        <div class="app-form-group" style="grid-column: 1 / -1;">
                            <label>Description/Notes</label>
                            <textarea id="maintenanceDescription" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Add Maintenance Record</button>
                </form>

                <div class="search-filter">
                    <input type="text" id="maintenanceSearch" placeholder="Search maintenance records...">
                    <select id="maintenanceFilterEquipment">
                        <option value="">All Equipment</option>
                    </select>
                    <select id="maintenanceFilterType">
                        <option value="">All Types</option>
                        <option value="Oil Change">Oil Change</option>
                        <option value="Tire Replacement">Tire Replacement</option>
                        <option value="Brake Service">Brake Service</option>
                        <option value="Engine Repair">Engine Repair</option>
                        <option value="Transmission Service">Transmission Service</option>
                        <option value="Hydraulic Service">Hydraulic Service</option>
                        <option value="DOT Inspection">DOT Inspection</option>
                        <option value="Annual Inspection">Annual Inspection</option>
                        <option value="Paving Equipment Service">Paving Equipment Service</option>
                        <option value="Sealcoat Equipment Service">Sealcoat Equipment Service</option>
                        <option value="Preventive Maintenance">Preventive Maintenance</option>
                        <option value="Emergency Repair">Emergency Repair</option>
                        <option value="Other">Other</option>
                    </select>
                    <button class="btn export-btn" onclick="exportData('maintenance')">Export</button>
                </div>

                <table class="data-table" id="maintenanceTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Equipment</th>
                            <th>Type</th>
                            <th>Cost</th>
                            <th>Technician</th>
                            <th>Hours</th>
                            <th>Description</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div id="reports" class="tab-content">
                <h2>Fleet Reports</h2>
                
                <div class="form-grid">
                    <div class="app-form-group">
                        <label>Report Type</label>
                        <select id="reportType">
                            <option value="maintenance-costs">Maintenance Costs</option>
                            <option value="equipment-status">Equipment Status</option>
                            <option value="maintenance-schedule">Maintenance Schedule</option>
                            <option value="cost-analysis">Cost Analysis</option>
                        </select>
                    </div>
                    <div class="app-form-group">
                        <label>Date Range From</label>
                        <input type="date" id="reportDateFrom">
                    </div>
                    <div class="app-form-group">
                        <label>Date Range To</label>
                        <input type="date" id="reportDateTo">
                    </div>
                    <div class="app-form-group">
                        <button class="btn btn-primary" onclick="generateReport()">Generate Report</button>
                    </div>
                </div>

                <div id="reportResults"></div>
            </div>
        </div>
    </div>

    <!-- Equipment Specifications Modal -->
    <div id="specsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSpecsModal()">&times;</span>
            <div id="specsModalContent"></div>
        </div>
    </div>

    <!-- Edit Equipment Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Edit Equipment</h2>
            <form id="editEquipmentForm">
                <input type="hidden" id="editEquipmentIndex">
                <div class="form-grid">
                    <div class="app-form-group">
                        <label>Equipment Name</label>
                        <input type="text" id="editEquipmentName" required>
                    </div>
                    <div class="app-form-group">
                        <label>Type</label>
                        <select id="editEquipmentType" required>
                            <option value="Dump Trucks">Dump Trucks</option>
                            <option value="Trucks">Trucks</option>
                            <option value="Trailers">Trailers</option>
                            <option value="Paving">Paving</option>
                            <option value="Skids/Excavation">Skids/Excavation</option>
                            <option value="Rollers">Rollers</option>
                            <option value="Sealcoat">Sealcoat</option>
                            <option value="Crack Fill">Crack Fill</option>
                            <option value="Shop Equipment">Shop Equipment</option>
                            <option value="Small Engine">Small Engine</option>
                            <option value="Misc">Misc</option>
                        </select>
                    </div>
                    <div class="app-form-group">
                        <label>Status</label>
                        <select id="editEquipmentStatus" required>
                            <option value="Active">Active</option>
                            <option value="Maintenance">Maintenance</option>
                            <option value="Repair">Repair</option>
                            <option value="DOT">DOT</option>
                            <option value="Inactive">Inactive</option>
                        </select>
                    </div>
                    <div class="app-form-group">
                        <label>License Plate</label>
                        <input type="text" id="editLicensePlate">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Update Equipment</button>
            </form>
        </div>
    </div>

    <script>
        // Global variables for multi-tenant data storage
        let currentCompany = null;
        let currentUser = null;
        let equipmentData = [];
        let maintenanceData = [];

        // Theme colors
        const themes = {
            blue: {
                primary: 'linear-gradient(135deg, #2E86AB, #A23B72)',
                header: 'linear-gradient(135deg, #1B4332, #2D6A4F)',
                accent: '#2E86AB'
            },
            green: {
                primary: 'linear-gradient(135deg, #059669, #10B981)',
                header: 'linear-gradient(135deg, #064E3B, #065F46)',
                accent: '#059669'
            },
            orange: {
                primary: 'linear-gradient(135deg, #EA580C, #F97316)',
                header: 'linear-gradient(135deg, #9A3412, #C2410C)',
                accent: '#EA580C'
            },
            purple: {
                primary: 'linear-gradient(135deg, #7C3AED, #A855F7)',
                header: 'linear-gradient(135deg, #5B21B6, #7C2D12)',
                accent: '#7C3AED'
            },
            red: {
                primary: 'linear-gradient(135deg, #DC2626, #EF4444)',
                header: 'linear-gradient(135deg, #991B1B, #B91C1C)',
                accent: '#DC2626'
            }
        };

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
        });

        // Authentication Functions
        function checkAuthStatus() {
            const savedAuth = localStorage.getItem('fleetAuth');
            if (savedAuth) {
                const authData = JSON.parse(savedAuth);
                currentCompany = authData.company;
                currentUser = authData.user;
                showMainApp();
            } else {
                showLoginPage();
            }
        }

        function showLoginPage() {
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('mainApp').style.display = 'none';
        }

        function showMainApp() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            
            // Update UI with user/company info
            document.getElementById('companyName').textContent = currentCompany.name;
            document.getElementById('userName').textContent = currentUser.name;
            
            // Load company-specific data
            loadData();
            updateDashboard();
            updateEquipmentDropdowns();
            
            // Set default date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('maintenanceDate').value = today;
            
            // Add event listeners
            document.getElementById('equipmentForm').addEventListener('submit', addEquipment);
            document.getElementById('maintenanceForm').addEventListener('submit', addMaintenance);
            document.getElementById('editEquipmentForm').addEventListener('submit', updateEquipment);
            
            // Search and filter functionality
            document.getElementById('equipmentSearch').addEventListener('input', filterEquipment);
            document.getElementById('equipmentFilter').addEventListener('change', filterEquipment);
            document.getElementById('maintenanceSearch').addEventListener('input', filterMaintenance);
            document.getElementById('maintenanceFilterEquipment').addEventListener('change', filterMaintenance);
            document.getElementById('maintenanceFilterType').addEventListener('change', filterMaintenance);

            // Load saved theme
            const savedTheme = localStorage.getItem('fleetTheme') || 'blue';
            changeTheme(savedTheme);

            // Welcome notification
            showNotification('success', 'Welcome!', `Welcome back, ${currentUser.name}!`);
        }

        function switchAuthTab(tab) {
            // Remove active class from all tabs and forms
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Show corresponding form
            document.getElementById(tab + 'Form').classList.add('active');
        }

        function switchLoginMethod(method) {
            const tabs = event.target.parentElement.querySelectorAll('.auth-tab');
            const forms = event.target.parentElement.parentElement.querySelectorAll('.auth-form');
            
            tabs.forEach(t => t.classList.remove('active'));
            forms.forEach(f => f.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(method + 'LoginForm').classList.add('active');
        }

        function switchRegisterMethod(method) {
            const tabs = event.target.parentElement.querySelectorAll('.auth-tab');
            const forms = event.target.parentElement.parentElement.querySelectorAll('.auth-form');
            
            tabs.forEach(t => t.classList.remove('active'));
            forms.forEach(f => f.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(method + 'RegisterForm').classList.add('active');
        }

        function toggleCompanyForm() {
            const newCompanyRadio = document.getElementById('newCompany');
            const newCompanyForm = document.getElementById('newCompanyForm');
            const companySelect = document.getElementById('companySelect');
            
            if (newCompanyRadio.checked) {
                newCompanyForm.style.display = 'block';
                companySelect.style.display = 'none';
            } else {
                newCompanyForm.style.display = 'none';
                companySelect.style.display = 'block';
            }
        }

        function handleEmailLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const companyId = getSelectedCompany();
            
            if (!companyId) {
                showNotification('error', 'Error', 'Please select a company');
                return;
            }

            // Simulate authentication (in production, this would call your backend API)
            authenticateUser('email', { email, password }, companyId);
        }

        function handlePhoneLogin(event) {
            event.preventDefault();
            
            const countryCode = document.getElementById('countryCode').value;
            const phoneNumber = document.getElementById('phoneNumber').value;
            const password = document.getElementById('phonePassword').value;
            const companyId = getSelectedCompany();
            
            if (!companyId) {
                showNotification('error', 'Error', 'Please select a company');
                return;
            }

            // Simulate authentication
            authenticateUser('phone', { phone: countryCode + phoneNumber, password }, companyId);
        }

        function handleEmailRegister(event) {
            event.preventDefault();
            
            const name = document.getElementById('regFullName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const companyName = document.getElementById('regCompanyName').value;
            const companyCode = document.getElementById('regCompanyCode').value;
            
            if (password !== confirmPassword) {
                showNotification('error', 'Error', 'Passwords do not match');
                return;
            }

            if (password.length < 6) {
                showNotification('error', 'Error', 'Password must be at least 6 characters');
                return;
            }

            // Simulate registration
            registerUser('email', { name, email, password }, { name: companyName, code: companyCode });
        }

        function handlePhoneRegister(event) {
            event.preventDefault();
            
            const name = document.getElementById('regPhoneFullName').value;
            const countryCode = document.getElementById('regCountryCode').value;
            const phoneNumber = document.getElementById('regPhoneNumber').value;
            const password = document.getElementById('regPhonePassword').value;
            const confirmPassword = document.getElementById('regPhoneConfirmPassword').value;
            const companyName = document.getElementById('regCompanyName').value;
            const companyCode = document.getElementById('regCompanyCode').value;
            
            if (password !== confirmPassword) {
                showNotification('error', 'Error', 'Passwords do not match');
                return;
            }

            if (password.length < 6) {
                showNotification('error', 'Error', 'Password must be at least 6 characters');
                return;
            }

            // Show verification form for phone registration
            showPhoneVerification();
            
            // Simulate sending verification code
            setTimeout(() => {
                showNotification('info', 'Verification Code Sent', `Code sent to ${countryCode}${phoneNumber}`);
            }, 1000);
        }

        function getSelectedCompany() {
            const existingCompany = document.getElementById('existingCompany').checked;
            
            if (existingCompany) {
                return document.getElementById('companySelect').value;
            } else {
                const companyName = document.getElementByI class="btn btn-google" onclick="loginWithGoogle()">
                        <span>ðŸ“§</span> Continue with Google
                    </button>
                    
                    <div class="divider">
                        <span>or</span>
                    </div>

                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="loginEmail" required placeholder="Enter your email">
                    </div>
                    
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" required placeholder="Enter your password">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Sign In</button>
                    
                    <div class="forgot-password">
                        <a href="#" onclick="showForgotPassword()">Forgot Password?</a>
                    </div>
                </form>

                <!-- Phone Login -->
                <form id="phoneLoginForm" class="auth-form" onsubmit="handlePhoneLogin(event)">
                    <div class="form-group">
                        <label>Phone Number</label>
                        <div class="phone-input-container">
                            <select id="countryCode" class="country-code">
                                <option value="+1">ðŸ‡ºðŸ‡¸ +1</option>
                                <option value="+44">ðŸ‡¬ðŸ‡§ +44</option>
                                <option value="+33">ðŸ‡«ðŸ‡· +33</option>
                                <option value="+49">ðŸ‡©ðŸ‡ª +49</option>
                                <option value="+81">ðŸ‡¯ðŸ‡µ +81</option>
                                <option value="+86">ðŸ‡¨ðŸ‡³ +86</option>
                            </select>
                            <input type="tel" id="phoneNumber" class="phone-number" required placeholder="Enter phone number">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="phonePassword" required placeholder="Enter your password">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Sign In</button>
                </form>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="auth-form">
                <div class="company-selector">
                    <h3>Company Registration</h3>
                    <div class="form-group">
                        <label>Company Name</label>
                        <input type="text" id="regCompanyName" required placeholder="Enter company name">
                    </div>
                    <div class="form-group">
                        <label>Company Code</label>
                        <input type="text" id="regCompanyCode" required placeholder="Unique company identifier">
                    </div>
                </div>

                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="switchRegisterMethod('email')">Email</button>
                    <button class="auth-tab" onclick="switchRegisterMethod('phone')">Phone</button>
                </div>

                <!-- Email Register -->
                <form id="emailRegisterForm" class="auth-form active" onsubmit="handleEmailRegister(event)">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="regFullName" required placeholder="Enter your full name">
                    </div>
                    
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="regEmail" required placeholder="Enter your email">
                    </div>
                    
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="regPassword" required placeholder="Create a password" minlength="6">
                    </div>
                    
                    <div class="form-group">
                        <label>Confirm Password</label>
                        <input type="password" id="regConfirmPassword" required placeholder="Confirm your password">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Create Account</button>
                </form>

                <!-- Phone Register -->
                <form id="phoneRegisterForm" class="auth-form" onsubmit="handlePhoneRegister(event)">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="regPhoneFullName" required placeholder="Enter your full name">
                    </div>
                    
                    <div class="form-group">
                        <label>Phone Number</label>
                        <div class="phone-input-container">
                            <select id="regCountryCode" class="country-code">
                                <option value="+1">ðŸ‡ºðŸ‡¸ +1</option>
                                <option value="+44">ðŸ‡¬ðŸ‡§ +44</option>
                                <option value="+33">ðŸ‡«ðŸ‡· +33</option>
                                <option value="+49">ðŸ‡©ðŸ‡ª +49</option>
                                <option value="+81">ðŸ‡¯ðŸ‡µ +81</option>
                                <option value="+86">ðŸ‡¨ðŸ‡³ +86</option>
                            </select>
                            <input type="tel" id="regPhoneNumber" class="phone-number" required placeholder="Enter phone number">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="regPhonePassword" required placeholder="Create a password" minlength="6">
                    </div>
                    
                    <div class="form-group">
                        <label>Confirm Password</label>
                        <input type="password" id="regPhoneConfirmPassword" required placeholder="Confirm your password">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Create Account</button>
                </form>
            </div>

            <!-- Phone Verification -->
            <div id="phoneVerificationForm" class="auth-form">
                <h3>Phone Verification</h3>
                <p>Enter the 6-digit code sent to your phone</p>
                
                <div class="verification-code">
                    <input type="text" maxlength="1" id="code1" oninput="moveToNext(this, 'code2')">
                    <input type="text" maxlength="1" id="code2" oninput="moveToNext(this, 'code3')">
                    <input type="text" maxlength="1" id="code3" oninput="moveToNext(this, 'code4')">
                    <input type="text" maxlength="1" id="code4" oninput="moveToNext(this, 'code5')">
                    <input type="text" maxlength="1" id="code5" oninput="moveToNext(this, 'code6')">
                    <input type="text" maxlength="1" id="code6">
                </div>
                
                <button type="button"
